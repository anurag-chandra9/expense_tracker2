{% extends 'base.html' %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <div class="col-12">
            <div class="card mb-4" id="features">
                <div class="card-body">
                    <h2 class="card-title">Welcome to Expense Tracker</h2>
                    <p class="lead">Track your expenses easily and efficiently</p>
                    <hr>
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Features Available Without Login:</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <i class="fas fa-calculator me-2"></i>Basic Expense Calculator
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-chart-pie me-2"></i>View Sample Reports
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-list me-2"></i>Browse Categories
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h4>Full Features with Login:</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <i class="fas fa-save me-2"></i>Save Your Expenses
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-chart-line me-2"></i>Detailed Analytics
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-history me-2"></i>Expense History
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-file-export me-2"></i>Export Reports
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <a href="{% url 'register' %}" class="btn btn-primary btn-lg me-2">
                            <i class="fas fa-user-plus me-2"></i>Register Now
                        </a>
                        <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-sign-in-alt me-2"></i>Login
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sample Calculator Section -->
    <div class="row">
        <div class="col-md-6" id="calculator">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Quick Expense Calculator</h4>
                    <form id="calculatorForm" class="mt-3">
                        <div class="mb-3">
                            <label for="amount" class="form-label">Amount</label>
                            <input type="number" class="form-control" id="amount" step="0.01" required>
                        </div>
                        <div class="mb-3">
                            <label for="category" class="form-label">Category</label>
                            <select class="form-select" id="category" required>
                                <option value="">Select a category</option>
                                <option value="Food">Food</option>
                                <option value="Transportation">Transportation</option>
                                <option value="Entertainment">Entertainment</option>
                                <option value="Shopping">Shopping</option>
                                <option value="Bills">Bills</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Calculate</button>
                        </div>
                    </form>
                    <div id="calculationResult" class="mt-3" style="display: none;">
                        <h5>Calculation Result:</h5>
                        <p class="mb-0">Amount: <span id="resultAmount"></span></p>
                        <p class="mb-0">Category: <span id="resultCategory"></span></p>
                        <div class="alert alert-info mt-2">
                            <i class="fas fa-info-circle me-2"></i>
                            Create an account to save this expense!
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Sample Expense Chart</h4>
                    <canvas id="sampleChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Handle calculator form
    const calculatorForm = document.getElementById('calculatorForm');
    const calculationResult = document.getElementById('calculationResult');
    const resultAmount = document.getElementById('resultAmount');
    const resultCategory = document.getElementById('resultCategory');

    calculatorForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const amount = document.getElementById('amount').value;
        const category = document.getElementById('category').value;
        
        resultAmount.textContent = `$${parseFloat(amount).toFixed(2)}`;
        resultCategory.textContent = category;
        calculationResult.style.display = 'block';
    });

    // Sample chart
    const ctx = document.getElementById('sampleChart').getContext('2d');
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Food', 'Transportation', 'Entertainment', 'Shopping', 'Bills', 'Others'],
            datasets: [{
                data: [30, 20, 15, 10, 15, 10],
                backgroundColor: [
                    '#FF6384',
                    '#36A2EB',
                    '#FFCE56',
                    '#4BC0C0',
                    '#9966FF',
                    '#FF9F40'
                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                },
                title: {
                    display: true,
                    text: 'Sample Expense Distribution'
                }
            }
        }
    });
});
</script>
{% endblock %}
{% endblock %}
